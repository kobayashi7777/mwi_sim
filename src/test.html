<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet">
    <title>地牢模拟大赛</title>
    <style>
        .scroll-container {
            position: relative;
            overflow: hidden;
            padding: 20px 0;
        }
        
        .scroll-content {
            display: flex;
            gap: 2rem;
            padding: 0 20px;
            transition: transform 0.3s ease-out;
            will-change: transform;
        }
        
        .scroll-item {
            min-width: 90%;
            max-width: 90%;
        }
        
        @media (min-width: 768px) {
            .scroll-item {
                min-width: 45%;
                max-width: 45%;
            }
        }
        
        .scroll-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            z-index: 10;
            opacity: 0.5;
            transition: opacity 0.3s, transform 0.3s;
        }
        
        .scroll-arrow:hover {
            opacity: 1;
            transform: translateY(-50%) scale(1.1);
        }
        
        .scroll-arrow.left {
            left: 10px;
        }
        
        .scroll-arrow.right {
            right: 10px;
        }
        
        .scroll-arrow.hidden {
            display: none;
        }
        
        .scroll-hint {
            text-align: center;
            color: #666;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        /* 标签页样式 */
        .tabs {
            margin-bottom: 1rem;
        }
        
        .tab-level-1 {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 0.5rem;
        }
        
        .tab-level-2 {
            display: flex;
            border-bottom: 1px solid #ddd;
        }
        
        .tab-level-1 .tab-button {
            flex: 1; /* 平分宽度 */
        }
        
        .tab-level-2 .tab-button {
            flex: 1; /* 平分宽度 */
        }
        
        .tab-button {
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            background: none;
            font-weight: 500;
            text-align: center; /* 文本居中 */
        }
        
        .tab-level-1 .tab-button {
            color: #4B5563;
        }
        
        .tab-level-2 .tab-button {
            color: #6B7280;
            font-size: 0.9rem;
        }
        
        .tab-button.active {
            color: #3B82F6;
            border-bottom: 2px solid #3B82F6;
        }
        
        .tab-button:hover:not(.active) {
            color: #1E40AF;
            background-color: #EFF6FF;
        }
        
        .tab-content {
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* 表格列宽调整 */
        .player-column {
            width: 15%; /* 减小上传人列宽 */
        }
        
        .occupation-column {
            width: 20%;
        }
        
        .average-time-column {
            width: 20%;
        }
        
        .simulator-data-column {
            width: 45%;
        }
    </style>
</head>

<body class="bg-gray-100 p-5 relative">
    <div class="absolute top-4 right-4">
        <button id="chinese-btn" class="bg-blue-500 text-white py-2 px-4 rounded mr-2 hover:bg-blue-600">中文</button>
        <button id="english-btn" class="bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600">EN</button>
    </div>
    <h1 class="text-3xl font-bold text-center mb-8" data-lang-key="title">地牢模拟大赛</h1>
    
    <div class="scroll-container">
        <div class="scroll-arrow left">
            <i class="fa-solid fa-chevron-left text-xl"></i>
        </div>
        
        <div class="scroll-content">
            <!-- 表格内容将通过JS动态插入这里 -->
        </div>
        
        <div class="scroll-arrow right">
            <i class="fa-solid fa-chevron-right text-xl"></i>
        </div>
    </div>
    
    <div class="mt-8">
        <p class="text-gray-700" data-lang-key="data_source">职业数据均采用统一模版，在2025.4.18版本模拟器下模拟100小时获得：<a href="https://shykai.github.io/MWICombatSimulatorTest/dist/" target="_blank" class="text-blue-500 hover:underline">测试服模拟器</a></p>
        <p class="text-gray-700" data-lang-key="role_limit">角色数据限制：耐力125 智力125 攻击125 力量140 防御125 远程140 魔法140 </p>
        <p class="text-gray-700" data-lang-key="gear_limit">装备限制：房屋6级，食物无限制，咖啡全攻击（禁经验、禁幸运）。披风+5，三贤者+5，其余装备+10，具体装备搭配无限制。光环35级，其余技能70级</p>
        <div class="flex justify-center mt-4">
            <a href="/sim.html" class="bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 upload-button" data-lang-key="upload_button">我不服！我要上传模拟数据</a>
        </div>
    </div>
    
    <script>
        // 添加多语言支持
        const languages = {
            "zh": {
                "title": "地牢模拟大赛",
                "occupation": "职业",
                "average_time": "平均耗时",
                "simulator_data": "模拟器数据",
                "uploader": "上传人",
                "copy": "复制",
                "copied": "已复制到剪贴板",
                "copy_failed": "复制失败",
                "data_source": "职业数据均采用统一模版，在2025.4.18版本模拟器下模拟100小时获得：<a href='https://shykai.github.io/MWICombatSimulatorTest/dist/' target='_blank' class='text-blue-500 hover:underline'>测试服模拟器</a>",
                "role_limit": "角色数据限制：耐力125 智力125 攻击125 力量140 防御125 远程140 魔法140 ",
                "gear_limit": "装备限制：房屋6级，食物无限制，咖啡全攻击（禁经验、禁幸运）。披风+5，三贤者+5，其余装备+10，具体装备搭配无限制。光环35级，其余技能70级",
                "upload_button": "我不服！我要上传模拟数据",
                "map_1": "D1",
                "map_2": "D2",
                "map_3": "D3",
                "map_4": "D4",
                "mace": "锤",
                "sword": "剑",
                "spear": "矛",
                "fire_mage": "火法",
                "nature_mage": "自然",
                "water_mage": "水法",
                "ranged": "远程",
                "scroll_hint": "左右拖动可查看更多表格",
                "equipment": "装备情况",
                "unrefined": "未精炼",
                "refined": "精炼",
                "difficulty": "地图难度",
                "T0": "T0",
                "T1": "T1",
                "T2": "T2"
            },
            "en": {
                "title": "Dungeon Benchmark",
                "occupation": "Class",
                "average_time": "Average Time",
                "simulator_data": "Simulator data",
                "uploader": "Contributor",
                "copy": "Copy",
                "copied": "Copied to clipboard",
                "copy_failed": "Copy failed",
                "data_source": " All data comes from 100 hours of simulation on the 2025.4.18 version simulator: <a href='https://shykai.github.io/MWICombatSimulatorTest/dist/' target='_blank' class='text-blue-500 hover:underline'>Test server simulator</a>",
                "role_limit": "Character data limits:Stamina 125, Intelligence 125, Attack 125, Power 140, Defense 125, Ranged 140, Magic 140",
                "gear_limit": "Gear limits: Level 6 house, no food restrictions, full-attack coffee (Ban XP and Luck). +5 Back, +5 Philosopher's jewelry, the rest of the equipment +10, no specific equipment combination restrictions. Aura level 35, the rest of the ability level 70",
                "upload_button": "Bullshit! I want to upload simulation data",
                "map_1": "D1",
                "map_2": "D2",
                "map_3": "D3",
                "map_4": "D4",
                "mace": "Mace",
                "sword": "Sword",
                "spear": "Spear",
                "fire_mage": "Fire Mage",
                "nature_mage": "Nature Mage",
                "water_mage": "Water Mage",
                "ranged": "Ranged",
                "scroll_hint": "Drag left/right to view more tables",
                "equipment": "Equipment",
                "unrefined": "Unrefined",
                "refined": "Refined",
                "difficulty": "Map Difficulty",
                "T0": "T0",
                "T1": "T1",
                "T2": "T2"
            }
        };

        // 设置语言函数
        function setLanguage(lang) {
            const elements = document.querySelectorAll('[data-lang-key]');
            elements.forEach(element => {
                const key = element.getAttribute('data-lang-key');
                if (key) {
                    if (key === 'data_source') {
                        element.innerHTML = languages[lang][key];
                    } else {
                        element.textContent = languages[lang][key];
                    }
                }
            });

            const copyButtons = document.querySelectorAll('.copy-button');
            copyButtons.forEach(button => {
                button.innerHTML = '<i class="fa-solid fa-copy"></i> '+languages[lang]['copy'];
            });

            const uploadButton = document.querySelector('.upload-button');
            if (uploadButton) {
                uploadButton.textContent = languages[lang]['upload_button'];
            }

            const mapHeaders = document.querySelectorAll('.map-header');
            mapHeaders.forEach((header, index) => {
                const mapKey = `map_${index + 1}`;
                header.textContent = languages[lang][mapKey];
            });
            
            const professionCells = document.querySelectorAll('.profession-cell');
            professionCells.forEach(cell => {
                const professionKey = cell.getAttribute('data-profession-key');
                cell.textContent = languages[lang][professionKey];
            });

            // 更新标签页文本
            document.querySelectorAll('.tab-level-1 .tab-button[data-equip="unrefined"]').forEach(btn => {
                btn.textContent = languages[lang]['unrefined'];
            });
            document.querySelectorAll('.tab-level-1 .tab-button[data-equip="refined"]').forEach(btn => {
                btn.textContent = languages[lang]['refined'];
            });
            
            document.querySelectorAll('.tab-level-2 .tab-button[data-difficulty="T0"]').forEach(btn => {
                btn.textContent = languages[lang]['T0'];
            });
            document.querySelectorAll('.tab-level-2 .tab-button[data-difficulty="T1"]').forEach(btn => {
                btn.textContent = languages[lang]['T1'];
            });
            document.querySelectorAll('.tab-level-2 .tab-button[data-difficulty="T2"]').forEach(btn => {
                btn.textContent = languages[lang]['T2'];
            });
        }

        // 创建表格内容函数
        function createTableContent(results) {
            const sortedResults = [...results].sort((a, b) => b.eph - a.eph);
            const table = document.createElement('table');
            table.classList.add('w-full', 'mx-auto', 'my-4', 'tab-content');

            // 创建表头
            const thead = document.createElement('thead');
            const headerRow = document.createElement('tr');
            const headers = [
                {key: 'occupation', class: 'occupation-column'},
                {key: 'average_time', class: 'average-time-column'},
                {key: 'simulator_data', class: 'simulator-data-column'},
                {key: 'uploader', class: 'player-column'}
            ];
            
            headers.forEach(header => {
                const th = document.createElement('th');
                th.setAttribute('data-lang-key', header.key);
                th.textContent = languages['zh'][header.key];
                th.classList.add('py-2', 'px-2', 'text-center', 'font-bold', 'border-b', header.class);
                headerRow.appendChild(th);
            });
            
            thead.appendChild(headerRow);
            table.appendChild(thead);

            // 创建表格内容
            const tbody = document.createElement('tbody');
            sortedResults.forEach(result => {
                const row = document.createElement('tr');
                row.classList.add('hover:bg-gray-50');
                
                const nameCell = document.createElement('td');
                nameCell.classList.add('occupation-column', 'py-2', 'px-2', 'text-center');
                
                let professionKey;
                switch (result.name) {
                    case "锤": professionKey = "mace"; break;
                    case "剑": professionKey = "sword"; break;
                    case "矛": professionKey = "spear"; break;
                    case "火法": professionKey = "fire_mage"; break;
                    case "自然": professionKey = "nature_mage"; break;
                    case "水法": professionKey = "water_mage"; break;
                    case "远程": professionKey = "ranged"; break;
                }
                nameCell.setAttribute('data-profession-key', professionKey);
                nameCell.textContent = languages['zh'][professionKey];
                nameCell.classList.add('profession-cell');
                row.appendChild(nameCell);
                
                const ephCell = document.createElement('td');
                ephCell.classList.add('average-time-column', 'py-2', 'px-2', 'text-center');
                ephCell.textContent = result.eph;
                row.appendChild(ephCell);
                
                const copyCell = document.createElement('td');
                copyCell.classList.add('simulator-data-column', 'py-2', 'px-2', 'text-center');
                const copyButton = document.createElement('button');
                copyButton.classList.add('bg-blue-500', 'text-white', 'py-1', 'px-3', 'rounded', 'hover:bg-blue-600', 'focus:outline-none', 'focus:ring-2', 'focus:ring-blue-400', 'focus:ring-opacity-75', 'copy-button');
                copyButton.innerHTML = '<i class="fa-solid fa-copy"></i> '+languages['zh']['copy'];
                copyButton.addEventListener('click', () => {
                    if (navigator.clipboard) {
                        navigator.clipboard.writeText(result.data).then(() => {
                            alert(languages['zh']['copied']);
                        }).catch(err => {
                            alert(languages['zh']['copy_failed'] + ': ' + err);
                        });
                    } else {
                        const textArea = document.createElement('textarea');
                        textArea.value = result.data;
                        document.body.appendChild(textArea);
                        textArea.select();
                        try {
                            const successful = document.execCommand('copy');
                            alert(successful ? languages['zh']['copied'] : languages['zh']['copy_failed']);
                        } catch (err) {
                            alert(languages['zh']['copy_failed'] + ': ' + err);
                        }
                        document.body.removeChild(textArea);
                    }
                });
                copyCell.appendChild(copyButton);
                row.appendChild(copyCell);
                
                const playerCell = document.createElement('td');
                playerCell.classList.add('player-column', 'py-2', 'px-2', 'text-center');
                playerCell.textContent = result.player;
                row.appendChild(playerCell);
                
                tbody.appendChild(row);
            });
            table.appendChild(tbody);
            return table;
        }

        // 语言切换事件
        const chineseBtn = document.getElementById('chinese-btn');
        const englishBtn = document.getElementById('english-btn');

        chineseBtn.addEventListener('click', () => {
            setLanguage('zh');
        });

        englishBtn.addEventListener('click', () => {
            setLanguage('en');
        });

        // 初始化表格数据
        const table_data =  [
        {
            "map": "精石头",
            "sim_result": {
                "unrefined": {
                    "T0": [
                        { "name": "锤", "eph": 120, "data": "T0未精炼锤数据", "player": "玩家A", "id": "76" },
                        { "name": "剑", "eph": 110, "data": "T0未精炼剑数据", "player": "玩家B", "id": "" },
                        { "name": "矛", "eph": 115, "data": "T0未精炼矛数据", "player": "玩家C", "id": "75" },
                        { "name": "火法", "eph": 130, "data": "T0未精炼火法数据", "player": "玩家D", "id": "65" },
                        { "name": "自然", "eph": 105, "data": "T0未精炼自然数据", "player": "玩家E", "id": "43" },
                        { "name": "水法", "eph": 125, "data": "T0未精炼水法数据", "player": "玩家F", "id": "60" },
                        { "name": "远程", "eph": 135, "data": "T0未精炼远程数据", "player": "玩家G", "id": "71" }
                    ],
                    "T1": [
                        { "name": "锤", "eph": 140, "data": "T1未精炼锤数据", "player": "玩家H", "id": "76" },
                        { "name": "剑", "eph": 130, "data": "T1未精炼剑数据", "player": "玩家I", "id": "" },
                        { "name": "矛", "eph": 135, "data": "T1未精炼矛数据", "player": "玩家J", "id": "75" },
                        { "name": "火法", "eph": 150, "data": "T1未精炼火法数据", "player": "玩家K", "id": "65" },
                        { "name": "自然", "eph": 125, "data": "T1未精炼自然数据", "player": "玩家L", "id": "43" },
                        { "name": "水法", "eph": 145, "data": "T1未精炼水法数据", "player": "玩家M", "id": "60" },
                        { "name": "远程", "eph": 155, "data": "T1未精炼远程数据", "player": "玩家N", "id": "71" }
                    ],
                    "T2": [
                        { "name": "锤", "eph": 160, "data": "T2未精炼锤数据", "player": "玩家O", "id": "76" },
                        { "name": "剑", "eph": 150, "data": "T2未精炼剑数据", "player": "玩家P", "id": "" },
                        { "name": "矛", "eph": 155, "data": "T2未精炼矛数据", "player": "玩家Q", "id": "75" },
                        { "name": "火法", "eph": 170, "data": "T2未精炼火法数据", "player": "玩家R", "id": "65" },
                        { "name": "自然", "eph": 145, "data": "T2未精炼自然数据", "player": "玩家S", "id": "43" },
                        { "name": "水法", "eph": 165, "data": "T2未精炼水法数据", "player": "玩家T", "id": "60" },
                        { "name": "远程", "eph": 175, "data": "T2未精炼远程数据", "player": "玩家U", "id": "71" }
                    ]
                },
                "refined": {
                    "T0": [
                        { "name": "锤", "eph": 180, "data": "T0精炼锤数据", "player": "玩家V", "id": "76" },
                        { "name": "剑", "eph": 170, "data": "T0精炼剑数据", "player": "玩家W", "id": "" },
                        { "name": "矛", "eph": 175, "data": "T0精炼矛数据", "player": "玩家X", "id": "75" },
                        { "name": "火法", "eph": 190, "data": "T0精炼火法数据", "player": "玩家Y", "id": "65" },
                        { "name": "自然", "eph": 165, "data": "T0精炼自然数据", "player": "玩家Z", "id": "43" },
                        { "name": "水法", "eph": 185, "data": "T0精炼水法数据", "player": "玩家AA", "id": "60" },
                        { "name": "远程", "eph": 195, "data": "T0精炼远程数据", "player": "玩家AB", "id": "71" }
                    ],
                    "T1": [
                        { "name": "锤", "eph": 200, "data": "T1精炼锤数据", "player": "玩家AC", "id": "76" },
                        { "name": "剑", "eph": 190, "data": "T1精炼剑数据", "player": "玩家AD", "id": "" },
                        { "name": "矛", "eph": 195, "data": "T1精炼矛数据", "player": "玩家AE", "id": "75" },
                        { "name": "火法", "eph": 210, "data": "T1精炼火法数据", "player": "玩家AF", "id": "65" },
                        { "name": "自然", "eph": 185, "data": "T1精炼自然数据", "player": "玩家AG", "id": "43" },
                        { "name": "水法", "eph": 205, "data": "T1精炼水法数据", "player": "玩家AH", "id": "60" },
                        { "name": "远程", "eph": 215, "data": "T1精炼远程数据", "player": "玩家AI", "id": "71" }
                    ],
                    "T2": [
                        { "name": "锤", "eph": 220, "data": "T2精炼锤数据", "player": "玩家AJ", "id": "76" },
                        { "name": "剑", "eph": 210, "data": "T2精炼剑数据", "player": "玩家AK", "id": "" },
                        { "name": "矛", "eph": 215, "data": "T2精炼矛数据", "player": "玩家AL", "id": "75" },
                        { "name": "火法", "eph": 230, "data": "T2精炼火法数据", "player": "玩家AM", "id": "65" },
                        { "name": "自然", "eph": 205, "data": "T2精炼自然数据", "player": "玩家AN", "id": "43" },
                        { "name": "水法", "eph": 225, "data": "T2精炼水法数据", "player": "玩家AO", "id": "60" },
                        { "name": "远程", "eph": 235, "data": "T2精炼远程数据", "player": "玩家AP", "id": "71" }
                    ]
                }
            }
        },
        {
            "map": "精暮光",
            "sim_result": {
                "unrefined": {
                    "T0": [
                        { "name": "锤", "eph": 125, "data": "T0未精炼锤数据", "player": "玩家AQ", "id": "68" },
                        { "name": "剑", "eph": 115, "data": "T0未精炼剑数据", "player": "玩家AR", "id": "78" },
                        { "name": "矛", "eph": 120, "data": "T0未精炼矛数据", "player": "玩家AS", "id": "68" },
                        { "name": "火法", "eph": 135, "data": "T0未精炼火法数据", "player": "玩家AT", "id": "67" },
                        { "name": "自然", "eph": 110, "data": "T0未精炼自然数据", "player": "玩家AU", "id": "61" },
                        { "name": "水法", "eph": 130, "data": "T0未精炼水法数据", "player": "玩家AV", "id": "63" },
                        { "name": "远程", "eph": 140, "data": "T0未精炼远程数据", "player": "玩家AW", "id": "70" }
                    ],
                    "T1": [
                        { "name": "锤", "eph": 145, "data": "T1未精炼锤数据", "player": "玩家AX", "id": "68" },
                        { "name": "剑", "eph": 135, "data": "T1未精炼剑数据", "player": "玩家AY", "id": "78" },
                        { "name": "矛", "eph": 140, "data": "T1未精炼矛数据", "player": "玩家AZ", "id": "68" },
                        { "name": "火法", "eph": 155, "data": "T1未精炼火法数据", "player": "玩家BA", "id": "67" },
                        { "name": "自然", "eph": 130, "data": "T1未精炼自然数据", "player": "玩家BB", "id": "61" },
                        { "name": "水法", "eph": 150, "data": "T1未精炼水法数据", "player": "玩家BC", "id": "63" },
                        { "name": "远程", "eph": 160, "data": "T1未精炼远程数据", "player": "玩家BD", "id": "70" }
                    ],
                    "T2": [
                        { "name": "锤", "eph": 165, "data": "T2未精炼锤数据", "player": "玩家BE", "id": "68" },
                        { "name": "剑", "eph": 155, "data": "T2未精炼剑数据", "player": "玩家BF", "id": "78" },
                        { "name": "矛", "eph": 160, "data": "T2未精炼矛数据", "player": "玩家BG", "id": "68" },
                        { "name": "火法", "eph": 175, "data": "T2未精炼火法数据", "player": "玩家BH", "id": "67" },
                        { "name": "自然", "eph": 150, "data": "T2未精炼自然数据", "player": "玩家BI", "id": "61" },
                        { "name": "水法", "eph": 170, "data": "T2未精炼水法数据", "player": "玩家BJ", "id": "63" },
                        { "name": "远程", "eph": 180, "data": "T2未精炼远程数据", "player": "玩家BK", "id": "70" }
                    ]
                },
                "refined": {
                    "T0": [
                        { "name": "锤", "eph": 185, "data": "T0精炼锤数据", "player": "玩家BL", "id": "68" },
                        { "name": "剑", "eph": 175, "data": "T0精炼剑数据", "player": "玩家BM", "id": "78" },
                        { "name": "矛", "eph": 180, "data": "T0精炼矛数据", "player": "玩家BN", "id": "68" },
                        { "name": "火法", "eph": 195, "data": "T0精炼火法数据", "player": "玩家BO", "id": "67" },
                        { "name": "自然", "eph": 170, "data": "T0精炼自然数据", "player": "玩家BP", "id": "61" },
                        { "name": "水法", "eph": 190, "data": "T0精炼水法数据", "player": "玩家BQ", "id": "63" },
                        { "name": "远程", "eph": 200, "data": "T0精炼远程数据", "player": "玩家BR", "id": "70" }
                    ],
                    "T1": [
                        { "name": "锤", "eph": 205, "data": "T1精炼锤数据", "player": "玩家BS", "id": "68" },
                        { "name": "剑", "eph": 195, "data": "T1精炼剑数据", "player": "玩家BT", "id": "78" },
                        { "name": "矛", "eph": 200, "data": "T1精炼矛数据", "player": "玩家BU", "id": "68" },
                        { "name": "火法", "eph": 215, "data": "T1精炼火法数据", "player": "玩家BV", "id": "67" },
                        { "name": "自然", "eph": 190, "data": "T1精炼自然数据", "player": "玩家BW", "id": "61" },
                        { "name": "水法", "eph": 210, "data": "T1精炼水法数据", "player": "玩家BX", "id": "63" },
                        { "name": "远程", "eph": 220, "data": "T1精炼远程数据", "player": "玩家BY", "id": "70" }
                    ],
                    "T2": [
                        { "name": "锤", "eph": 225, "data": "T2精炼锤数据", "player": "玩家BZ", "id": "68" },
                        { "name": "剑", "eph": 215, "data": "T2精炼剑数据", "player": "玩家CA", "id": "78" },
                        { "name": "矛", "eph": 220, "data": "T2精炼矛数据", "player": "玩家CB", "id": "68" },
                        { "name": "火法", "eph": 235, "data": "T2精炼火法数据", "player": "玩家CC", "id": "67" },
                        { "name": "自然", "eph": 210, "data": "T2精炼自然数据", "player": "玩家CD", "id": "61" },
                        { "name": "水法", "eph": 230, "data": "T2精炼水法数据", "player": "玩家CE", "id": "63" },
                        { "name": "远程", "eph": 240, "data": "T2精炼远程数据", "player": "玩家CF", "id": "70" }
                    ]
                }
            }
        },
        {
            "map": "精地狱",
            "sim_result": {
                "unrefined": {
                    "T0": [
                        { "name": "锤", "eph": 130, "data": "T0未精炼锤数据", "player": "玩家CG", "id": "73" },
                        { "name": "剑", "eph": 120, "data": "T0未精炼剑数据", "player": "玩家CH", "id": "25" },
                        { "name": "矛", "eph": 125, "data": "T0未精炼矛数据", "player": "玩家CI", "id": "74" },
                        { "name": "火法", "eph": 140, "data": "T0未精炼火法数据", "player": "玩家CJ", "id": "62" },
                        { "name": "自然", "eph": 115, "data": "T0未精炼自然数据", "player": "玩家CK", "id": "14" },
                        { "name": "水法", "eph": 135, "data": "T0未精炼水法数据", "player": "玩家CL", "id": "51" },
                        { "name": "远程", "eph": 145, "data": "T0未精炼远程数据", "player": "玩家CM", "id": "54" }
                    ],
                    "T1": [
                        { "name": "锤", "eph": 150, "data": "T1未精炼锤数据", "player": "玩家CN", "id": "73" },
                        { "name": "剑", "eph": 140, "data": "T1未精炼剑数据", "player": "玩家CO", "id": "25" },
                        { "name": "矛", "eph": 145, "data": "T1未精炼矛数据", "player": "玩家CP", "id": "74" },
                        { "name": "火法", "eph": 160, "data": "T1未精炼火法数据", "player": "玩家CQ", "id": "62" },
                        { "name": "自然", "eph": 135, "data": "T1未精炼自然数据", "player": "玩家CR", "id": "14" },
                        { "name": "水法", "eph": 155, "data": "T1未精炼水法数据", "player": "玩家CS", "id": "51" },
                        { "name": "远程", "eph": 165, "data": "T1未精炼远程数据", "player": "玩家CT", "id": "54" }
                    ],
                    "T2": [
                        { "name": "锤", "eph": 170, "data": "T2未精炼锤数据", "player": "玩家CU", "id": "73" },
                        { "name": "剑", "eph": 160, "data": "T2未精炼剑数据", "player": "玩家CV", "id": "25" },
                        { "name": "矛", "eph": 165, "data": "T2未精炼矛数据", "player": "玩家CW", "id": "74" },
                        { "name": "火法", "eph": 180, "data": "T2未精炼火法数据", "player": "玩家CX", "id": "62" },
                        { "name": "自然", "eph": 155, "data": "T2未精炼自然数据", "player": "玩家CY", "id": "14" },
                        { "name": "水法", "eph": 175, "data": "T2未精炼水法数据", "player": "玩家CZ", "id": "51" },
                        { "name": "远程", "eph": 185, "data": "T2未精炼远程数据", "player": "玩家DA", "id": "54" }
                    ]
                },
                "refined": {
                    "T0": [
                        { "name": "锤", "eph": 190, "data": "T0精炼锤数据", "player": "玩家DB", "id": "73" },
                        { "name": "剑", "eph": 180, "data": "T0精炼剑数据", "player": "玩家DC", "id": "25" },
                        { "name": "矛", "eph": 185, "data": "T0精炼矛数据", "player": "玩家DD", "id": "74" },
                        { "name": "火法", "eph": 200, "data": "T0精炼火法数据", "player": "玩家DE", "id": "62" },
                        { "name": "自然", "eph": 175, "data": "T0精炼自然数据", "player": "玩家DF", "id": "14" },
                        { "name": "水法", "eph": 195, "data": "T0精炼水法数据", "player": "玩家DG", "id": "51" },
                        { "name": "远程", "eph": 205, "data": "T0精炼远程数据", "player": "玩家DH", "id": "54" }
                    ],
                    "T1": [
                        { "name": "锤", "eph": 210, "data": "T1精炼锤数据", "player": "玩家DI", "id": "73" },
                        { "name": "剑", "eph": 200, "data": "T1精炼剑数据", "player": "玩家DJ", "id": "25" },
                        { "name": "矛", "eph": 205, "data": "T1精炼矛数据", "player": "玩家DK", "id": "74" },
                        { "name": "火法", "eph": 220, "data": "T1精炼火法数据", "player": "玩家DL", "id": "62" },
                        { "name": "自然", "eph": 195, "data": "T1精炼自然数据", "player": "玩家DM", "id": "14" },
                        { "name": "水法", "eph": 215, "data": "T1精炼水法数据", "player": "玩家DN", "id": "51" },
                        { "name": "远程", "eph": 225, "data": "T1精炼远程数据", "player": "玩家DO", "id": "54" }
                    ],
                    "T2": [
                        { "name": "锤", "eph": 230, "data": "T2精炼锤数据", "player": "玩家DP", "id": "73" },
                        { "name": "剑", "eph": 220, "data": "T2精炼剑数据", "player": "玩家DQ", "id": "25" },
                        { "name": "矛", "eph": 225, "data": "T2精炼矛数据", "player": "玩家DR", "id": "74" },
                        { "name": "火法", "eph": 240, "data": "T2精炼火法数据", "player": "玩家DS", "id": "62" },
                        { "name": "自然", "eph": 215, "data": "T2精炼自然数据", "player": "玩家DT", "id": "14" },
                        { "name": "水法", "eph": 235, "data": "T2精炼水法数据", "player": "玩家DU", "id": "51" },
                        { "name": "远程", "eph": 245, "data": "T2精炼远程数据", "player": "玩家DV", "id": "54" }
                    ]
                }
            }
        },
        {
            "map": "精地狱2",
            "sim_result": {
                "unrefined": {
                    "T0": [
                        { "name": "锤", "eph": 135, "data": "T0未精炼锤数据", "player": "玩家DW", "id": "73" },
                        { "name": "剑", "eph": 125, "data": "T0未精炼剑数据", "player": "玩家DX", "id": "25" },
                        { "name": "矛", "eph": 130, "data": "T0未精炼矛数据", "player": "玩家DY", "id": "74" },
                        { "name": "火法", "eph": 145, "data": "T0未精炼火法数据", "player": "玩家DZ", "id": "62" },
                        { "name": "自然", "eph": 120, "data": "T0未精炼自然数据", "player": "玩家EA", "id": "14" },
                        { "name": "水法", "eph": 140, "data": "T0未精炼水法数据", "player": "玩家EB", "id": "51" },
                        { "name": "远程", "eph": 150, "data": "T0未精炼远程数据", "player": "玩家EC", "id": "54" }
                    ],
                    "T1": [
                        { "name": "锤", "eph": 155, "data": "T1未精炼锤数据", "player": "玩家ED", "id": "73" },
                        { "name": "剑", "eph": 145, "data": "T1未精炼剑数据", "player": "玩家EE", "id": "25" },
                        { "name": "矛", "eph": 150, "data": "T1未精炼矛数据", "player": "玩家EF", "id": "74" },
                        { "name": "火法", "eph": 165, "data": "T1未精炼火法数据", "player": "玩家EG", "id": "62" },
                        { "name": "自然", "eph": 140, "data": "T1未精炼自然数据", "player": "玩家EH", "id": "14" },
                        { "name": "水法", "eph": 160, "data": "T1未精炼水法数据", "player": "玩家EI", "id": "51" },
                        { "name": "远程", "eph": 170, "data": "T1未精炼远程数据", "player": "玩家EJ", "id": "54" }
                    ],
                    "T2": [
                        { "name": "锤", "eph": 175, "data": "T2未精炼锤数据", "player": "玩家EK", "id": "73" },
                        { "name": "剑", "eph": 165, "data": "T2未精炼剑数据", "player": "玩家EL", "id": "25" },
                        { "name": "矛", "eph": 170, "data": "T2未精炼矛数据", "player": "玩家EM", "id": "74" },
                        { "name": "火法", "eph": 185, "data": "T2未精炼火法数据", "player": "玩家EN", "id": "62" },
                        { "name": "自然", "eph": 160, "data": "T2未精炼自然数据", "player": "玩家EO", "id": "14" },
                        { "name": "水法", "eph": 180, "data": "T2未精炼水法数据", "player": "玩家EP", "id": "51" },
                        { "name": "远程", "eph": 190, "data": "T2未精炼远程数据", "player": "玩家EQ", "id": "54" }
                    ]
                },
                "refined": {
                    "T0": [
                        { "name": "锤", "eph": 195, "data": "T0精炼锤数据", "player": "玩家ER", "id": "73" },
                        { "name": "剑", "eph": 185, "data": "T0精炼剑数据", "player": "玩家ES", "id": "25" },
                        { "name": "矛", "eph": 190, "data": "T0精炼矛数据", "player": "玩家ET", "id": "74" },
                        { "name": "火法", "eph": 205, "data": "T0精炼火法数据", "player": "玩家EU", "id": "62" },
                        { "name": "自然", "eph": 180, "data": "T0精炼自然数据", "player": "玩家EV", "id": "14" },
                        { "name": "水法", "eph": 200, "data": "T0精炼水法数据", "player": "玩家EW", "id": "51" },
                        { "name": "远程", "eph": 210, "data": "T0精炼远程数据", "player": "玩家EX", "id": "54" }
                    ],
                    "T1": [
                        { "name": "锤", "eph": 215, "data": "T1精炼锤数据", "player": "玩家EY", "id": "73" },
                        { "name": "剑", "eph": 205, "data": "T1精炼剑数据", "player": "玩家EZ", "id": "25" },
                        { "name": "矛", "eph": 210, "data": "T1精炼矛数据", "player": "玩家FA", "id": "74" },
                        { "name": "火法", "eph": 225, "data": "T1精炼火法数据", "player": "玩家FB", "id": "62" },
                        { "name": "自然", "eph": 200, "data": "T1精炼自然数据", "player": "玩家FC", "id": "14" },
                        { "name": "水法", "eph": 220, "data": "T1精炼水法数据", "player": "玩家FD", "id": "51" },
                        { "name": "远程", "eph": 230, "data": "T1精炼远程数据", "player": "玩家FE", "id": "54" }
                    ],
                    "T2": [
                        { "name": "锤", "eph": 235, "data": "T2精炼锤数据", "player": "玩家FF", "id": "73" },
                        { "name": "剑", "eph": 225, "data": "T2精炼剑数据", "player": "玩家FG", "id": "25" },
                        { "name": "矛", "eph": 230, "data": "T2精炼矛数据", "player": "玩家FH", "id": "74" },
                        { "name": "火法", "eph": 245, "data": "T2精炼火法数据", "player": "玩家FI", "id": "62" },
                        { "name": "自然", "eph": 220, "data": "T2精炼自然数据", "player": "玩家FJ", "id": "14" },
                        { "name": "水法", "eph": 240, "data": "T2精炼水法数据", "player": "玩家FK", "id": "51" },
                        { "name": "远程", "eph": 250, "data": "T2精炼远程数据", "player": "玩家FL", "id": "54" }
                    ]
                }
            }
        }
    ];
        const scrollContent = document.querySelector('.scroll-content');
        
        table_data.forEach((item, index) => {
            const itemDiv = document.createElement('div');
            itemDiv.classList.add('scroll-item', 'bg-white', 'p-4', 'rounded-lg', 'shadow-md');
            itemDiv.setAttribute('data-map-index', index);
            
            const header = document.createElement('h2');
            header.classList.add('text-xl', 'font-bold', 'mb-4', 'text-center', 'map-header');
            const mapKey = `map_${index + 1}`;
            header.setAttribute('data-lang-key', mapKey);
            header.textContent = languages['zh'][mapKey];
            itemDiv.appendChild(header);
            
            // 创建标签页容器
            const tabsContainer = document.createElement('div');
            tabsContainer.classList.add('tabs');
            
            // 第一级标签页 - 装备情况
            const tabLevel1 = document.createElement('div');
            tabLevel1.classList.add('tab-level-1');
            
            const unrefinedBtn = document.createElement('button');
            unrefinedBtn.classList.add('tab-button', 'active');
            unrefinedBtn.setAttribute('data-equip', 'unrefined');
            unrefinedBtn.textContent = languages['zh']['unrefined'];
            
            const refinedBtn = document.createElement('button');
            refinedBtn.classList.add('tab-button');
            refinedBtn.setAttribute('data-equip', 'refined');
            refinedBtn.textContent = languages['zh']['refined'];
            
            tabLevel1.appendChild(unrefinedBtn);
            tabLevel1.appendChild(refinedBtn);
            
            // 第二级标签页 - 地图难度
            const tabLevel2 = document.createElement('div');
            tabLevel2.classList.add('tab-level-2');
            
            const t0Btn = document.createElement('button');
            t0Btn.classList.add('tab-button', 'active');
            t0Btn.setAttribute('data-difficulty', 'T0');
            t0Btn.textContent = languages['zh']['T0'];
            
            const t1Btn = document.createElement('button');
            t1Btn.classList.add('tab-button');
            t1Btn.setAttribute('data-difficulty', 'T1');
            t1Btn.textContent = languages['zh']['T1'];
            
            const t2Btn = document.createElement('button');
            t2Btn.classList.add('tab-button');
            t2Btn.setAttribute('data-difficulty', 'T2');
            t2Btn.textContent = languages['zh']['T2'];
            
            tabLevel2.appendChild(t0Btn);
            tabLevel2.appendChild(t1Btn);
            tabLevel2.appendChild(t2Btn);
            
            tabsContainer.appendChild(tabLevel1);
            tabsContainer.appendChild(tabLevel2);
            itemDiv.appendChild(tabsContainer);
            
            // 创建表格容器
            const tableContainer = document.createElement('div');
            tableContainer.classList.add('table-container');
            itemDiv.appendChild(tableContainer);
            
            // 初始表格内容
            const initialTable = createTableContent(item.sim_result.unrefined.T0);
            tableContainer.appendChild(initialTable);
            
            // 标签页点击事件
            const equipButtons = tabLevel1.querySelectorAll('.tab-button');
            const difficultyButtons = tabLevel2.querySelectorAll('.tab-button');
            
            // 为标签按钮添加点击事件
            function handleTabClick() {
                // 获取当前选中的装备类型和难度
                const activeEquip = tabLevel1.querySelector('.tab-button.active').getAttribute('data-equip');
                const activeDifficulty = tabLevel2.querySelector('.tab-button.active').getAttribute('data-difficulty');
                
                // 获取对应的数据并更新表格
                const results = item.sim_result[activeEquip][activeDifficulty];
                tableContainer.innerHTML = '';
                tableContainer.appendChild(createTableContent(results));
            }
            
            // 装备标签点击事件
            equipButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    equipButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    handleTabClick();
                });
            });
            
            // 难度标签点击事件
            difficultyButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    difficultyButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    handleTabClick();
                });
            });
            
            scrollContent.appendChild(itemDiv);
        });

        // 实现拖动功能
        const scrollContainer = document.querySelector('.scroll-container');
        const leftArrow = document.querySelector('.scroll-arrow.left');
        const rightArrow = document.querySelector('.scroll-arrow.right');
        
        let isDragging = false;
        let startX;
        let scrollLeft;
        let currentIndex = 0;
        const itemCount = table_data.length;

        // 更新箭头显示状态
        function updateArrows() {
            leftArrow.classList.toggle('hidden', currentIndex <= 0);
            rightArrow.classList.toggle('hidden', currentIndex >= itemCount - (window.innerWidth >= 768 ? 2 : 1));
        }

        // 移动到指定索引
        function moveToIndex(index) {
            const itemWidth = document.querySelector('.scroll-item').offsetWidth + 60; // 包含间距
            const maxScroll = (itemCount - (window.innerWidth >= 768 ? 2 : 1)) * itemWidth;
            const scrollPosition = Math.min(index * itemWidth, maxScroll);
            
            scrollContent.style.transform = `translateX(-${scrollPosition}px)`;
            currentIndex = Math.floor(scrollPosition / itemWidth);
            updateArrows();
        }

        // 箭头点击事件
        leftArrow.addEventListener('click', () => {
            moveToIndex(currentIndex - 1);
        });

        rightArrow.addEventListener('click', () => {
            moveToIndex(currentIndex + 1);
        });

        // 鼠标拖动事件
        scrollContainer.addEventListener('mousedown', (e) => {
            isDragging = true;
            startX = e.pageX - scrollContainer.offsetLeft;
            scrollLeft = parseInt(scrollContent.style.transform.replace('translateX(-', '')) || 0;
            scrollContainer.style.cursor = 'grabbing';
        });

        scrollContainer.addEventListener('mouseleave', () => {
            isDragging = false;
            scrollContainer.style.cursor = 'grab';
        });

        scrollContainer.addEventListener('mouseup', () => {
            isDragging = false;
            scrollContainer.style.cursor = 'grab';
        });

        scrollContainer.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            e.preventDefault();
            const x = e.pageX - scrollContainer.offsetLeft;
            const walk = (x - startX) * 1.5; // 拖动速度
            
            const itemWidth = document.querySelector('.scroll-item').offsetWidth + 60;
            const maxScroll = (itemCount - (window.innerWidth >= 768 ? 2 : 1)) * itemWidth;
            const newScroll = Math.max(0, Math.min(scrollLeft - walk, maxScroll));
            
            scrollContent.style.transform = `translateX(-${newScroll}px)`;
            currentIndex = Math.round(newScroll / itemWidth);
            updateArrows();
        });

        // 触摸设备支持
        scrollContainer.addEventListener('touchstart', (e) => {
            isDragging = true;
            startX = e.touches[0].pageX - scrollContainer.offsetLeft;
            scrollLeft = parseInt(scrollContent.style.transform.replace('translateX(-', '')) || 0;
        }, { passive: true });

        scrollContainer.addEventListener('touchend', () => {
            isDragging = false;
        });

        scrollContainer.addEventListener('touchmove', (e) => {
            if (!isDragging) return;
            const x = e.touches[0].pageX - scrollContainer.offsetLeft;
            const walk = (x - startX) * 1.5;
            
            const itemWidth = document.querySelector('.scroll-item').offsetWidth + 60;
            const maxScroll = (itemCount - (window.innerWidth >= 768 ? 2 : 1)) * itemWidth;
            const newScroll = Math.max(0, Math.min(scrollLeft - walk, maxScroll));
            
            scrollContent.style.transform = `translateX(-${newScroll}px)`;
            currentIndex = Math.round(newScroll / itemWidth);
            updateArrows();
        }, { passive: true });

        // 窗口大小变化时重新计算
        window.addEventListener('resize', () => {
            moveToIndex(0);
        });

        // 初始化
        updateArrows();
        setLanguage('zh'); // 默认中文
    </script>
</body>
</html>